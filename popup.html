<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>S.P.A.R.E</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <h1>S.P.A.R.E</h1>
      <p id="status-line">Analyzing...</p>
    </div>

    <!-- Unified Score Display (New) -->
    <div class="score-display">
      <div class="score-ring">
        <svg viewBox="0 0 200 200" class="score-svg">
          <circle cx="100" cy="100" r="85" class="score-bg"></circle>
          <circle id="score-progress" cx="100" cy="100" r="85" class="score-ring-fill"></circle>
        </svg>
        <div class="score-text">
          <div id="score-value" class="score-number">0</div>
          <div class="score-label">PHISHING RISK</div>
        </div>
      </div>
      
      <!-- Module Breakdown -->
      <div class="module-scores">
        <div class="module-item">
          <span class="module-label">ON-PAGE</span>
          <span id="onpage-score" class="module-value">--</span>
        </div>
        <div class="module-item">
          <span class="module-label">VISUAL</span>
          <span id="visual-score" class="module-value">--</span>
        </div>
        <div class="module-item">
          <span class="module-label">OFF-PAGE</span>
          <span id="offpage-score" class="module-value">--</span>
        </div>
      </div>
    </div>

    <!-- Main Result -->
    <div id="result-card" class="result-card">
      <h2 id="result-title">SCANNING</h2>
      <div class="confidence-bar">
        <div id="confidence-fill" class="confidence-fill"></div>
      </div>
      <p id="confidence-text">Confidence: 0%</p>
    </div>

    <!-- URL -->
    <div class="section">
      <div class="section-title">URL</div>
      <div id="url-display" class="code-block"></div>
    </div>

    <!-- Tabs -->
    <div class="tabs">
      <button class="tab-btn active" data-tab="prediction">PREDICTION</button>
      <button class="tab-btn" data-tab="features">FEATURES</button>
      <button class="tab-btn" data-tab="offpage">OFF-PAGE</button>
      <button class="tab-btn" data-tab="visual">VISUAL</button>
      <button class="tab-btn" data-tab="raw">RAW</button>
    </div>

    <!-- Tab Content -->
    <div class="tab-content">
      <!-- Prediction Tab -->
      <div id="prediction-tab" class="tab-pane active">
        <div class="section">
          <div class="section-title">ANALYSIS</div>
          <div id="analysis-output" class="code-block"></div>
        </div>
      </div>

      <!-- Features Tab -->
      <div id="features-tab" class="tab-pane">
        <div class="section">
          <div class="section-title">EXTRACTED FEATURES (80)</div>
          <pre id="features-output" class="code-block"></pre>
        </div>
      </div>

      <!-- Off-Page Tab -->
      <div id="offpage-tab" class="tab-pane">
        <div class="section">
          <div class="section-title">DOMAIN RISK ANALYSIS</div>
          <pre id="offpage-output" class="code-block"></pre>
        </div>
      </div>

      <!-- Visual Tab -->
      <div id="visual-tab" class="tab-pane">
        <div class="section">
          <div class="section-title">VISUAL ANALYSIS</div>
          <pre id="visual-output" class="code-block">...</pre>
        </div>
      </div>

      <!-- Raw Tab (NEW) -->
      <div id="raw-tab" class="tab-pane">
        <div class="section">
          <div class="section-title">WEIGHT OPTIMIZER RAW DATA</div>
          <pre id="raw-output" class="code-block">...</pre>
        </div>
      </div>
    </div>

    <!-- User Feedback Section (New) -->
    <div class="feedback-section">
      <div class="section-title">HELP US LEARN</div>
      <p class="feedback-prompt">Was this site actually phishing?</p>
      <div class="feedback-buttons">
        <button id="feedback-phishing" class="feedback-btn danger">
          <span class="btn-icon">⚠️</span>
          PHISHING
        </button>
        <button id="feedback-safe" class="feedback-btn safe">
          <span class="btn-icon">✓</span>
          SAFE
        </button>
      </div>
      <p id="feedback-status" class="feedback-status"></p>
    </div>

    <!-- Actions -->
    <button id="reanalyze-btn" class="btn">RE-ANALYZE</button>
  </div>

  <script src="feature_extractor.js"></script>
  <script src="linucb.js"></script>
  <script type="module" src="offpage.js"></script>
  <script src="popup.js"></script>
</body>
</html>
